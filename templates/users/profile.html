{% extends "base.html" %}

{% block title %}–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å - –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω –ö–æ–ª—ë—Å–∏–∫–∏{% endblock %}

{% block content %}
<div class="row">
    <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ -->
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h4>üë§ –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h4>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h5>–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h5>
                        <p><strong>ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</strong> {{ current_user.id }}</p>
                        <p><strong>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</strong> {{ current_user.username }}</p>
                        <p><strong>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</strong> {{ current_user.created_at.strftime('%d.%m.%Y %H:%M') }}</p>
                        <p><strong>–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å:</strong> 
                            <span class="badge bg-success fs-6">üí∞ {{ "%.2f"|format(current_user.balance) }} —Ä—É–±.</span>
                        </p>
                    </div>
                    <div class="col-md-6">
                        <h5>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h5>
                        <div class="d-grid gap-2">
                            <a href="{{ url_for('products.add_product_page') }}" class="btn btn-success">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</a>
                            <a href="{{ url_for('users.transfer_page') }}" class="btn btn-warning">üí∏ –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –¥–µ–Ω—å–≥–∏</a>
                            <a href="{{ url_for('main.index') }}" class="btn btn-primary">üõí –ö—É–ø–∏—Ç—å —Ç–æ–≤–∞—Ä—ã</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ -->
        <div class="card mt-4">
            <div class="card-header">
                <h5>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤</h5>
            </div>
            <div class="card-body">
                <div class="row text-center">
                    <div class="col-md-4">
                        <div class="card bg-light">
                            <div class="card-body">
                                <h3 class="text-primary">{{ stats.total_products }}</h3>
                                <p class="mb-0">–í—Å–µ–≥–æ —Ç–æ–≤–∞—Ä–æ–≤</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card bg-light">
                            <div class="card-body">
                                <h3 class="text-success">{{ stats.available_products }}</h3>
                                <p class="mb-0">–í –ø—Ä–æ–¥–∞–∂–µ</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card bg-light">
                            <div class="card-body">
                                <h3 class="text-warning">{{ stats.sold_products }}</h3>
                                <p class="mb-0">–ü—Ä–æ–¥–∞–Ω–æ</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mt-3">
                    <a href="{{ url_for('products.my_products') }}" class="btn btn-outline-primary">–£–ø—Ä–∞–≤–ª—è—Ç—å —Ç–æ–≤–∞—Ä–∞–º–∏</a>
                </div>
            </div>
        </div>

        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫—É–ø–æ–∫ –∏ –ø—Ä–æ–¥–∞–∂ -->
        <div class="card mt-4">
            <div class="card-header">
                <h5>üí∞ –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6>–ü–æ–∫—É–ø–∫–∏</h6>
                        <p><strong>–ö—É–ø–ª–µ–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤:</strong> {{ stats.total_purchases }}</p>
                        <p><strong>–ü–æ—Ç—Ä–∞—á–µ–Ω–æ:</strong> {{ "%.2f"|format(stats.total_spent) }} —Ä—É–±.</p>
                        <a href="{{ url_for('products.purchased_products') }}" class="btn btn-sm btn-outline-info">–ú–æ–∏ –ø–æ–∫—É–ø–∫–∏</a>
                    </div>
                    <div class="col-md-6">
                        <h6>–ü—Ä–æ–¥–∞–∂–∏</h6>
                        <p><strong>–ü—Ä–æ–¥–∞–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤:</strong> {{ stats.total_sales }}</p>
                        <p><strong>–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ:</strong> {{ "%.2f"|format(stats.total_earned) }} —Ä—É–±.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
    <div class="col-md-4">
        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ -->
        <div class="card">
            <div class="card-header">
                <h6>üí∏ –ü–µ—Ä–µ–≤–æ–¥—ã –¥–µ–Ω–µ–≥</h6>
            </div>
            <div class="card-body">
                <p><strong>–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ:</strong><br>{{ "%.2f"|format(stats.total_sent) }} —Ä—É–±.</p>
                <p><strong>–ü–æ–ª—É—á–µ–Ω–æ:</strong><br>{{ "%.2f"|format(stats.total_received) }} —Ä—É–±.</p>
                <hr>
                <p><strong>–ß–∏—Å—Ç—ã–π –±–∞–ª–∞–Ω—Å –ø–µ—Ä–µ–≤–æ–¥–æ–≤:</strong><br>
                    {% set net_transfer = stats.total_received - stats.total_sent %}
                    <span class="{% if net_transfer >= 0 %}text-success{% else %}text-danger{% endif %}">
                        {{ "%.2f"|format(net_transfer) }} —Ä—É–±.
                    </span>
                </p>
            </div>
        </div>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <div class="card mt-3">
            <div class="card-header">
                <h6>üîó –ù–∞–≤–∏–≥–∞—Ü–∏—è</h6>
            </div>
            <div class="card-body">
                <div class="d-grid gap-2">
                    <a href="{{ url_for('main.index') }}" class="btn btn-outline-primary btn-sm">üè† –ì–ª–∞–≤–Ω–∞—è</a>
                    <a href="{{ url_for('auth.logout') }}" class="btn btn-outline-danger btn-sm">üö™ –í—ã–π—Ç–∏</a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}